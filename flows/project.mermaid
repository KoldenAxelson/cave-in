graph TD
    A[Start Game] --> B[Initialize Pygame]
    B --> C[Show Menu]
    
    C --> D{Select Mode}
    D -->|Normal| E1[Initialize Normal Game]
    D -->|Pathfinder| E2[Initialize AI Game]
    D -->|Quit| Q[Exit Game]
    
    E1 --> F[Game Loop]
    E2 --> F
    
    subgraph Game Loop
        F --> G[Handle Events]
        G --> H[Update World]
        H --> I[Render Frame]
        I --> F
    end
    
    subgraph Handle Events
        G --> G1[Check Quit]
        G --> G2[Get Input]
        G2 --> G2a[Keyboard Input]
        G2 --> G2b[AI Input]
        G --> G3[Check Reset]
    end
    
    subgraph Update World
        H --> H1[Update Player]
        H --> H2[Update AI]
        H --> H3[Check Game Over]
    end
    
    J[Game Over] --> K{Reset?}
    K -->|Yes| L[Reset Game State]
    L --> F
    K -->|No| Q